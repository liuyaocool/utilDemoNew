<!doctype html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <title>mongodb</title>

    <link rel="stylesheet" href="../00-static/base.css">
    <style>

    </style>

    <script src="../00-static/base.js"></script>

</head>
<body>

<pre>

    <h2 class="anchor">锁表</h2>
    查询锁表
        select pid, state, usename, query, query_start from pg_stat_activity
        where pid in (select pid from pg_locks l
            join pg_class t on l.relation = t.oid and t.relkind = 'r');
    解锁
        SELECT pg_cancel_backend(pid);
    idle in transaction 问题
        1 ps -aux |grep "idle in transaction"
        2 kill pid（postgres:***）

    <h2 class="anchor">...</h2>

</pre>

</body>
</html>